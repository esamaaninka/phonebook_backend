{"version":3,"sources":["components/Persons.js","components/Filter.js","components/NameForm.js","services/Persons.js","services/Notification.js","App.js","index.js"],"names":["Persons","personlist","namefilter","deletePerson","filter","p","name","toLowerCase","includes","map","key","number","onClick","window","confirm","id","Filter","nameFilter","filterNames","value","onChange","NameForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","put","delete","messageStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","Notification","message","errorFlag","style","App","useState","persons","setPersons","setNewName","setNewNumber","setNameFilter","errorMessage","setErrorMessage","setErrorFlag","useEffect","personService","initialPersonList","event","target","preventDefault","person","changedPerson","nameObject","updatedPerson","setTimeout","catch","error","console","log","returnedPerson","concat","f","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.350c6b41.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons =({personlist, namefilter, deletePerson}) => {\r\n    // check persons list against filter case insensitive, and display only matching ones\r\n    return (\r\n      <div>\r\n        {personlist.filter(p => p.name.toLowerCase()\r\n                  .includes(namefilter.toLowerCase()) )\r\n                  .map(p => <p key={p.name}> \r\n                  {p.name + ' ' + p.number + ' '}\r\n                  <button onClick={() => {\r\n                    //console.log('Button delete: ', p.id)\r\n                    if(window.confirm(`Want to delete ${p.name}`))\r\n                      deletePerson(p.id)\r\n                  }}>delete</button>                  \r\n                  </p>)\r\n      }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Persons\r\n","import React from 'react'\r\n\r\nconst Filter = ({nameFilter, filterNames}) => {\r\n\r\n    return(\r\n        <div>\r\n            filter shown with:\r\n            <input value={nameFilter}\r\n                onChange={filterNames}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst NameForm = ({addName, newName,handleNameChange, newNumber, handleNumberChange}) => {\r\n  return(\r\n    <form onSubmit={addName}>\r\n        <div>\r\n            name: \r\n              <input value={newName} \r\n              onChange={handleNameChange}\r\n              />\r\n        </div>\r\n        <div>\r\n            number:\r\n              <input value={newNumber}\r\n              onChange={handleNumberChange}\r\n              />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n  )\r\n}\r\nexport default NameForm","import axios from 'axios'\r\n// comment out for use with devenv json-server or phonebook-backed\r\n// for use with server static UI frontend, proxy for devenv see package.json\r\nconst baseUrl = '/api/persons' \r\n//const baseUrl = 'http://localhost:3001/persons' // with json-server\r\n//const baseUrl = 'http://localhost:3001/api/persons' // with backend server\r\n//const baseUrl = 'https://safe-lake-35420.herokuapp.com/api/persons/'\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  //console.log('Persons update:', id, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\nexport default { getAll, create, update, deletePerson }","import React from 'react'\r\n\r\n// messages and errors from 2e part2 example\r\n\r\nconst messageStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  \r\n  const errorStyle = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  \r\n  const Notification = ({message, errorFlag}) => {\r\n    if(!message) return null \r\n    else return(\r\n      <div style={errorFlag === false ? messageStyle : errorStyle}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import React, { useState, useEffect } from 'react'\r\nimport Persons from './components/Persons'\r\nimport Filter from './components/Filter'\r\nimport NameForm from './components/NameForm'\r\nimport personService from './services/Persons'\r\nimport Notification from './services/Notification'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ nameFilter, setNameFilter ] = useState('')\r\n  const [ errorMessage, setErrorMessage] = useState(null)\r\n  const [ errorFlag, setErrorFlag] = useState(false)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersonList => {\r\n        setPersons(initialPersonList)\r\n      })\r\n  }, [])\r\n\r\n  const addName = (event) => { \r\n    event.preventDefault()\r\n    \r\n    // check person if already included, if yes either ok to update number or cancel\r\n    if(persons.map(person => person.name).includes(newName)){\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`))\r\n       {\r\n        var changedPerson = persons.filter(p => p.name === newName)\r\n        \r\n        const nameObject = {\r\n          name: changedPerson[0].name,\r\n          number: newNumber\r\n         }\r\n        \r\n        changedPerson[0].number = newNumber    \r\n        \r\n        personService\r\n          .update(changedPerson[0].id, nameObject)\r\n          .then(updatedPerson => {\r\n            setPersons(persons.map(p => p.id !== changedPerson.id ? p : updatedPerson ))\r\n            setErrorMessage(`Updated ${newName} number with: ${newNumber}`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n              setErrorFlag(false)\r\n            },5000)\r\n            setNewName('')\r\n            setNewNumber('')\r\n          })\r\n          // if new number too short, validation error displayed ok, but the\r\n          // browser list shows the too short number (not saved to db tough)\r\n          .catch(error => {\r\n            console.log(error.response.data)\r\n            setErrorFlag(true)\r\n            setErrorMessage(`${error.response.data.error}`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n              setErrorFlag(false)\r\n            }, 5000) \r\n            // do not empty text input fields, let user continue filling\r\n          })\r\n      }\r\n    }\r\n    //\r\n    // person not included yet, create new record\r\n    else {\r\n      const nameObject = {\r\n          name: newName,\r\n          number: newNumber,\r\n      }\r\n      personService\r\n        .create(nameObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setErrorMessage(`Added ${newName} with number ${newNumber}`)\r\n          setErrorFlag(false) \r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          },5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })        \r\n        .catch(error => {\r\n          console.log(error.response.data)\r\n          setErrorFlag(true)\r\n          setErrorMessage(`${error.response.data.error}`)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n            setErrorFlag(false)\r\n          },5000)\r\n          // do not empty text input fields, let user continue filling\r\n        })\r\n      }\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n      personService\r\n        .deletePerson(id)\r\n        .then(returnedPerson => {\r\n          //remove the id person\r\n          setPersons(persons.filter(f => f.id !== id))\r\n        })\r\n  }\r\n\r\n  const handleNameChange = (event) => setNewName(event.target.value)\r\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n  const filterNames = (event) => setNameFilter(event.target.value)\r\n  \r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n        <Notification message={errorMessage} errorFlag={errorFlag} />\r\n        <Filter nameFilter={nameFilter} filterNames={filterNames}/>\r\n      <h3>Add a new</h3>\r\n        <NameForm addName={addName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h3>Numbers</h3>\r\n        <Persons personlist={persons} namefilter={nameFilter} deletePerson={deletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n//import './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}